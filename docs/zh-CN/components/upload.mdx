# Upload 上传

用来上传多种格式的附件

## 何时使用

上传本地文档

上传图片附件或照片墙

## 基础用法

import DemoUpload from '../../demo/upload/section-upload.jsx'

<DemoUpload />

## 拖拽上传

import DemoDrag from '../../demo/upload/section-drag.jsx'

<DemoDrag />

## 照片墙上传

import DemoPictureWall from '../../demo/upload/section-picture-wall.jsx'

<DemoPictureWall />

## 头像上传

import DemoHead from '../../demo/upload/section-head.jsx'

<DemoHead />

## 照片上传

import DemoPicture from '../../demo/upload/section-picture.jsx'

<DemoPicture />

## 自定义上传

import DemoCustom from '../../demo/upload/section-custom.jsx'

<DemoCustom />

import { Badge } from '@libs'

## Upload Props

| 参数            | 说明                                                                                                                                                   | 类型                                                        | 可选值                                            | 默认值                                    |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------- | ------------------------------------------------- | ----------------------------------------- |
| type            | 上传组件类型                                                                                                                                           | string                                                      | default \| drag \| pictureCard \| avatar \| photo | default                                   |
| accept          | 接收上传的文件类型， 用逗号隔开的 MIME 类型列表，参考 [MDN-MIME 类型](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_Types)     | string                                                      | -                                                 | -                                         |
| content         | 上传按钮文案，仅在 type === 'default' 的时候有效                                                                                                       | string \| ReactNode                                         | -                                                 | 本地上传                                  |
| maxSize         | 接收上传的文件体积上限（单位：KB）                                                                                                                     | number                                                      | -                                                 | -                                         |
| maxCount        | 接收上传的文件最大数量                                                                                                                                 | number                                                      | -                                                 | -                                         |
| uploadAction    | 必选，上传的地址                                                                                                                                       | string                                                      | -                                                 | -                                         |
| params          | 除了上传文件外的其它 form 参数                                                                                                                         | object                                                      | -                                                 | -                                         |
| name            | 发到后台文件参数名                                                                                                                                     | string                                                      | -                                                 | file                                      |
| disabled        | 是否禁用                                                                                                                                               | boolean                                                     | true \| false                                     | false                                     |
| headers         | 设置上传的请求头部                                                                                                                                     | object                                                      | -                                                 | { 'Content-type': 'multipart/form-data' } |
| withCredentials | 上传请求时是否携带 cookie                                                                                                                              | boolean                                                     | true \| false                                     | false                                     |
| showUploadList  | 是否展示 uploadList, 仅在 type === 'default' 和 type === 'pictureCard' 时有效                                                                          | boolean                                                     | true \| false                                     | true                                      |
| multiple        | 是否支持多选文件                                                                                                                                       | boolean                                                     | true \| false                                     | false                                     |
| defaultFileList | 默认已上传文件列表                                                                                                                                     | File[]                                                      | -                                                 | []                                        |
| fileList        | 已上传文件列表（受控）                                                                                                                                 | File[]                                                      | -                                                 | -                                         |
| beforeUpload    | 上传文件前的钩子，返回 true 继续上传，其他终止上传                                                                                                     | (files: File[], fileList: File[]) => boolean                | -                                                 | () => true                                |
| customUpload    | 自定义上传，此时不会再触发 onChange，所有上传逻辑转移到该函数                                                                                          | (files: Files[]) => void                                    | -                                                 | -                                         |
| onChange        | 上传回调。当 function 返回 false 或者返回 promise（ 例如 promise resolve(false)）则已上传的文件列表不会展示该文件                                      | (file: File, fileList: File[], response: object) => boolean | -                                                 | -                                         |
| onRemove        | 删除上传的文件，为 false 时不可删除。当 function 返回 true 或者返回 promise（如果 promise resolve(true)）则会在前端删除文件（可参考 demo：照片墙上传） | (file: File, fileList: File[], index: number) => boolean    | -                                                 | () => true                                |
| onDownload      | 点击已上传的文件时的回调，如果没有指定，则默认新标签页跳转到文件 url                                                                                   | (file: File) => void                                        | -                                                 | 新标签页访问文件 url                      |
| loading         | 文件上传按钮是否 loading，为 true 时按钮不可点击。仅在 type='default' 时有效                                                                           | boolean                                                     | true \| false                                     | false                                     |

## Type

### File

| 参数        | 说明         | 类型   | 可选值                              | 默认值 |
| ----------- | ------------ | ------ | ----------------------------------- | ------ |
| fileId      | 上传文件 id  | string | -                                   | -      |
| fileType    | 文件类型     | string | -                                   | -      |
| name        | 文件名       | string | -                                   | -      |
| uploadState | 上传文件状态 | string | 'success' \| 'uploading' \| 'error' | -      |
| url         | 上传文件地址 | string | -                                   | -      |
