# Tree 树形控件

具备展示多层级数据结构特征的组件

## 何时使用

- 多层级数据结构
- 需要明确的展示层级结构
- 对多层级结构节点进行操作

## 普通用法

import DemoNormal from '../../demo/tree/section-normal.jsx'

<DemoNormal />

## 异步加载

import DemoAsync from '../../demo/tree/section-async.jsx'

<DemoAsync />

## 多选

import DemoMultiple from '../../demo/tree/section-multiple.jsx'

<DemoMultiple />

## 可搜索

import DemoSearch from '../../demo/tree/section-search.jsx'

<DemoSearch />

## 可编辑

import DemoEdit from '../../demo/tree/section-edit.jsx'

<DemoEdit />

## 可拖拽

import DemoDrag from '../../demo/tree/section-drag.jsx'

<DemoDrag />

## Props

| 参数             | 说明                                                                    | 类型                                                                     | 可选值        | 默认值 |
| ---------------- | ----------------------------------------------------------------------- | ------------------------------------------------------------------------ | ------------- | ------ |
| data             | 展示数据                                                                | DataItem []                                                              | -             | -      |
| checkable        | 节点前添加 Checkbox 复选框（暂不支持与 draggable 和 editable 同时使用） | boolean                                                                  | true \| false | false  |
| editable         | 节点右键可编辑（添加同级节点、添加子节点、编辑节点、删除节点）          | boolean                                                                  | true \| false | false  |
| draggable        | 节点可拖拽                                                              | boolean                                                                  | true \| false | false  |
| searchable       | 节点可搜索                                                              | boolean                                                                  | true \| false | false  |
| loadTreeNode     | 点击异步加载子项                                                        | object                                                                   | -             | -      |
| defaultExpandAll | 是否默认展开所有树节点                                                  | boolean                                                                  | true \| false | false  |
| checkedIds       | 选中的 checkbox                                                         | string[]                                                                 | -             | -      |
| openIcon         | 表示展开的图标                                                          | string                                                                   | Icon 图标名称 | -      |
| closeIcon        | 表示闭合的图标                                                          | string                                                                   | Icon 图标名称 | -      |
| onChange         | 树组件改变时触发                                                        | (data:TreeNode[]) => void                                                | -             | -      |
| onExpand         | 节点被点击(展开/收起)时触发                                             | (expanded: boolean, expandIds: string[], expandedNode: TreeNode) => void | -             | -      |
| onCheck          | 点击节点多选框触发                                                      | (checked: boolean, checkedIds: string[], checkedNode: TreeNode) => void  | -             | -      |
| onClick          | 点击节点文字时触发                                                      | (clickNode: TreeNode) => void                                            | -             | -      |
| onDragStart      | 节点开始拖拽时触发                                                      | (dragNode: TreeNode) => void                                             | -             | -      |
| onDrop           | 节点拖拽时触发                                                          | (dragNode: TreeNode, dropNode: TreeNode) => boolean                      | -             | -      |
| onDropEnd        | 节点拖拽成功时触发                                                      | (dragNode: TreeNode, dropNode: TreeNode) => void                         | -             | -      |
| onDelete         | 节点删除时触发                                                          | (deletedNode: TreeNode, data: TreeNode[]) => void                        | -             | -      |
| onSave           | 节点保存新增、编辑状态时触发                                            | (savedNode: TreeNode, data: TreeNode[]) => void                          | -             | -      |

## Type

### LoadTreeNode

| 参数              | 说明                                                       | 类型                             | 可选值          | 默认值 |
| ----------------- | ---------------------------------------------------------- | -------------------------------- | --------------- | ------ |
| method            | 异步请求的方法                                             | string                           | 'get' \| 'post' | 'get'  |
| url               | 异步请求的 url                                             | string                           | -               | -      |
| headers           | 异步请求的请求头                                           | TreeNode                         | -               | -      |
| data              | post 请求时的请求体                                        | object                           | -               | -      |
| params            | 异步请求时的 url 参数                                      | object                           | -               | -      |
| transformResponse | 对异步请求结果进行加工处理的函数，返回结果用于生成子节点项 | (response: object) => TreeNode[] | -               | -      |

### TreeNode

| 参数     | 说明           | 类型                | 可选值 | 默认值 |
| -------- | -------------- | ------------------- | ------ | ------ |
| id       | 树节点唯一 id  | string              | -      | -      |
| title    | 树节点标题     | string \| ReactNode | -      | -      |
| children | 该节点的子节点 | TreeNode[]          | -      | -      |

<div style={{ position: 'relative' }}>
  <span
    style={{
      position: 'absolute',
      background: '#fff',
      left: '50%',
      transform: 'translate(-50%, -50%)',
      fontSize: '14px',
      padding: 8,
      color: '#999'
    }}
  >
    1.5.x api 如下
  </span>
  <hr style={{ marginTop: 50, marginBottom: 20, border: '0.5px dashed #c8c8c8' }} />
</div>

## Tree Attributes

| 参数             | 说明                                                                    | 类型                                                           | 可选值                       | 默认值 |
| ---------------- | ----------------------------------------------------------------------- | -------------------------------------------------------------- | ---------------------------- | ------ |
| data             | 展示数据                                                                | Array                                                          | 参见 Tree Attributes-data    | -      |
| checkable        | 节点前添加 Checkbox 复选框（暂不支持与 draggable 和 editable 同时使用） | Boolean                                                        | -                            | false  |
| editable         | 节点右键可编辑（添加同级节点、添加子节点、编辑节点、删除节点）          | Boolean                                                        | -                            | false  |
| draggable        | 节点可拖拽                                                              | Boolean                                                        | -                            | false  |
| searchable       | 节点可搜索                                                              | Boolean                                                        | -                            | false  |
| options          | 配置选项                                                                | Object                                                         | 参见 Tree Attributes-options | -      |
| origin           | 异步加载配置项                                                          | Object                                                         | 参见 Tree Attributes-origin  | -      |
| defaultExpandAll | 是否默认展开所有树节点                                                  | Boolean                                                        | -                            | false  |
| checkedKeys      | 默认选中的 checkbox                                                     | Array                                                          | -                            | -      |
| openIcon         | 表示展开的图标                                                          | String                                                         | Icon 图标名称                | -      |
| closeIcon        | 表示闭合的图标                                                          | String                                                         | Icon 图标名称                | -      |
| style            | 组件整体样式                                                            | Object                                                         | -                            | -      |
| highlightable    | 高亮                                                                    | Boolean                                                        | -                            | -      |
| onChange         | 改变复选框状态时触发                                                    | Function(checkedArr:Array, title: String, isChecked: Boolean)  | -                            | -      |
| onNodeToggle     | 节点被点击(展开/收起)时触发                                             | Function(data: Obejct, isExpanded: Boolean)                    | -                            | -      |
| onCheckChange    | 节点选中项                                                              | Funciton(checkedArr: Array, title: String, isChecked: Boolean) | -                            | -      |
| onCheck          | 点击节点多选框触发                                                      | Funciton(checkedArr: Array, item: Object, isChecked: Boolean)  | -                            | -      |
| onDragStart      | 节点开始拖拽时触发                                                      | Funciton(dragNode: Object)                                     | -                            | -      |
| onDrop           | 节点拖拽成功时触发                                                      | Funciton(dragNode: Object, dropNode: Object)                   | -                            | -      |
| onDelete         | 节点删除时触发                                                          | Funciton(deleteNode: Object, data: Object)                     | -                            | -      |
| onSave           | 节点保存新增、编辑状态时触发                                            | Funciton(editNode: Object, data: Object)                       | -                            | -      |

## Tree Attributes-data

| 参数        | 说明                                                               | 类型     | 可选值 | 默认值 |
| ----------- | ------------------------------------------------------------------ | -------- | ------ | ------ |
| expanded    | 默认是否展开子菜单（优先级高于 defaultExpandAll）                  | Boolean  | -      | -      |
| onClick     | 点击每项时触发的事件                                               | Function | -      | -      |
| onNodeClick | 点击每项时触发，onClick 作用具体绑定的项，onNodeClick 作用于所以项 | Function | -      | -      |
| style       | 单个节点样式                                                       | Object   | -      | -      |

## Tree Attributes-origin

| 参数         | 说明                                                       | 类型            | 可选值      | 默认值 |
| ------------ | ---------------------------------------------------------- | --------------- | ----------- | ------ |
| method       | 异步请求的方法                                             | String          | get \| post | get    |
| url          | 异步请求的 url                                             | String          | -           | -      |
| headers      | 异步请求的请求头                                           | Object          | -           | -      |
| data         | post 请求时的请求体                                        | Object          | -           | -      |
| params       | 异步请求时的 url 参数                                      | Object          | -           | -      |
| func         | 对异步请求结果进行加工处理的函数，返回结果用于生成子节点项 | Function(data)  | -           | -      |
| errorHandler | 对异步请求错误进行自定义处理的函数                         | Function(error) | -           | -      |

## Tree Attributes-options

| 参数     | 说明                               | 类型   | 可选值 | 默认值   |
| -------- | ---------------------------------- | ------ | ------ | -------- |
| title    | 指定节点标签为节点对象的某个属性值 | String | -      | title    |
| children | 指定子树为节点对象的某个属性值     | String | -      | children |
