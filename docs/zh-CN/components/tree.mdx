# Tree 树形控件

具备展示多层级数据结构特征的组件

## 何时使用

多层级数据结构

需要明确的展示层级结构

对多层级结构节点进行操作

## 基础单选

import DemoNormal from '../../demo/tree/section-normal.jsx'

<DemoNormal />

## 基础多选

import DemoMultiple from '../../demo/tree/section-multiple.jsx'

<DemoMultiple />

## 搜索用法

import DemoSearch from '../../demo/tree/section-search.jsx'

<DemoSearch />

## 编辑用法

import DemoEdit from '../../demo/tree/section-edit.jsx'

<DemoEdit />

## 排序用法

import DemoDrag from '../../demo/tree/section-drag.jsx'

<DemoDrag />

## 异步加载

import DemoAsync from '../../demo/tree/section-async.jsx'

<DemoAsync />

## 其他样式

import DemoLine from '../../demo/tree/section-line.jsx'

<DemoLine />

## Props

| 参数               | 说明                                                                    | 类型                                                                     | 可选值                          | 默认值    |
| ------------------ | ----------------------------------------------------------------------- | ------------------------------------------------------------------------ | ------------------------------- | --------- |
| data               | 展示数据                                                                | DataItem []                                                              | -                               | -         |
| checkable          | 节点前添加 Checkbox 复选框（暂不支持与 draggable 和 editable 同时使用） | boolean                                                                  | true \| false                   | false     |
| editable           | 节点右键可编辑（添加同级节点、添加子节点、编辑节点、删除节点）          | boolean                                                                  | true \| false                   | false     |
| draggable          | 节点可拖拽                                                              | boolean                                                                  | true \| false                   | false     |
| searchable         | 节点可搜索                                                              | boolean                                                                  | true \| false                   | false     |
| highlightable      | 节点高亮                                                                | boolean                                                                  | true \| false                   | false     |
| loadTreeNode       | 点击异步加载子项                                                        | LoadTreeNode \| (id: string) => LoadTreeNode                             | -                               | -         |
| defaultExpandAll   | 是否默认展开所有树节点                                                  | boolean                                                                  | true \| false                   | false     |
| defaultHighlightId | 默认高亮的节点                                                          | string                                                                  | -                  | -     |
| checkedIds         | 选中的 checkbox                                                         | string[]                                                                 | -                               | -         |
| openIcon           | 表示展开的图标                                                          | string                                                                   | Icon 图标名称                   | -         |
| closeIcon          | 表示闭合的图标                                                          | string                                                                   | Icon 图标名称                   | -         |
| apperance          | 树形控件的展现形态                                                      | string                                                                   | 'default' \| 'line' \| 'folder' | 'default' |
| contextMenu        | 自定义右键菜单,参考 _示例_ 及 _页面底部自定义右键菜单使用说明_          | ContextMenuOption[] \| (item: DataItem) => ContextMenuOption[]           |                                 | []        |
| onChange           | 树组件改变时触发                                                        | (data: TreeNode[]) => void                                               | -                               | -         |
| onExpand           | 节点被点击(展开/收起)时触发                                             | (expanded: boolean, expandIds: string[], expandedNode: TreeNode) => void | -                               | -         |
| onCheck            | 点击节点多选框触发                                                      | (checked: boolean, checkedIds: string[], checkedNode: TreeNode) => void  | -                               | -         |
| onClick            | 点击节点文字时触发                                                      | (clickNode: TreeNode) => void                                            | -                               | -         |
| onDragStart        | 节点开始拖拽时触发                                                      | (dragNode: TreeNode) => void                                             | -                               | -         |
| onDrop             | 节点拖拽时触发                                                          | (dragNode: TreeNode, dropNode: TreeNode) => boolean                      | -                               | -         |
| onDropEnd          | 节点拖拽成功时触发                                                      | (dragNode: TreeNode, dropNode: TreeNode) => void                         | -                               | -         |
| onDelete           | 节点删除时触发                                                          | (deletedNode: TreeNode, data: TreeNode[]) => void                        | -                               | -         |
| onSave             | 节点保存新增、编辑状态时触发                                            | (savedNode: TreeNode, data: TreeNode[]) => void                          | -                               | -         |

## Type

### LoadTreeNode

| 参数              | 说明                                                       | 类型                             | 可选值          | 默认值 |
| ----------------- | ---------------------------------------------------------- | -------------------------------- | --------------- | ------ |
| method            | 异步请求的方法                                             | string                           | 'get' \| 'post' | 'get'  |
| url               | 异步请求的 url                                             | string                           | -               | -      |
| headers           | 异步请求的请求头                                           | TreeNode                         | -               | -      |
| data              | post 请求时的请求体                                        | object                           | -               | -      |
| params            | 异步请求时的 url 参数                                      | object                           | -               | -      |
| transformResponse | 对异步请求结果进行加工处理的函数，返回结果用于生成子节点项 | (response: object) => TreeNode[] | -               | -      |

### TreeNode

| 参数     | 说明           | 类型                | 可选值        | 默认值 |
| -------- | -------------- | ------------------- | ------------- | ------ |
| id       | 树节点唯一 id  | string              | -             | -      |
| title    | 树节点标题     | string \| ReactNode | -             | -      |
| disabled | 是否禁用节点   | boolean             | true \| false | false  |
| children | 该节点的子节点 | TreeNode[]          | -             | -      |

### ContextMenuOption

| 参数    | 说明               | 类型                                      | 可选值                                                                                                                  | 默认值 |
| ------- | ------------------ | ----------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- | ------ |
| type    | 菜单执行的功能     | string                                    | editNode: 编辑当前节点 <br/> addChildNode: 添加子节点 <br/> addSiblingNode: 添加同级节点 <br/> deleteNode: 删除当前节点 | -      |
| title   | 菜单标题           | string \| ReactNode                       | -                                                                                                                       | -      |
| onClick | 点击菜单项时的回调 | ( item: DataItem, node: TreeNode) => void | -                                                                                                                       | -      |

> **自定义右键菜单使用说明**
>
> contextMenu 参数：
>
> - type: editNode / addChildNode / addSiblingNode / deleteNode
> - title: 自定义 Title / 行为默认 Title
> - onClick: (item: 当前节点数据, node: 当前节点) => {
>
>   _如需调用组件提供的 新增同级节点 / 新增子节点 / 编辑当前节点/ 删除当前节点_
>
>   _需调用 node.addSiblingNode/ addChildNode/ editNode / deleteNode_
>
>   }
